<div>
    <h2 class="text-center">
        Shopping Bag
    </h2>

    <ng-container *ngIf="cartItemsCount$ | async; else emptyCart">
        <div *ngFor="let item of cartItems$ | async; index as index"
             class="justify-content-center">
            <mat-card class="pt-3 pb-3 mb-4">
                <div class="row">
                    <mat-card-title>
                        <div class="row justify-content-center">
                            <div class="offset-1 col-6 col-md-9 col-lg-10 mb-10 text-center align-self-center">
                                {{ item.element.title }}
                            </div>

                            <div class="col-1">
                                <button mat-icon-button
                                        class="material-icons"
                                        color="warn"
                                        (click)="remove(index)">delete
                                </button>
                            </div>
                        </div>
                    </mat-card-title>

                    <div class="text-center col-md-6">
                        <img alt="Book image"
                             class="border-radius-40"
                             [src]="'http://placekitten.com/g/160/120'">
                    </div>

                    <div class="col-md-6">
                        <mat-card-content>
                            <p>{{ item.element.description }}</p>
                        </mat-card-content>

                        <mat-card-actions class="row text-center">
                            <div class="col-12">
                                <b>{{ item.element.price | currency: "RUB":"â‚½" }}</b>
                            </div>

                            <div class="col-12">
                                <b>Count: {{ item.count }}</b>
                            </div>

                            <button class="col-5 text-center"
                                    mat-button
                                    (click)="decreaseQuantity(item, index)">-
                            </button>

                            <button
                                    class="offset-1 col-5 text-center"
                                    mat-button
                                    (click)="increaseQuantity(item)">+
                            </button>
                        </mat-card-actions>
                    </div>
                </div>
            </mat-card>
        </div>

        <div class="mb-4 row flex-column flex-md-row justify-content-around">
            <button
                    class="col-6 col-md-4 mb-4 mb-md-0 align-self-center"
                    mat-raised-button
                    color="warn"
                    (click)="clearCart()"
            >Clear cart</button>

            <a class="col-6 col-md-4 align-self-center"
               mat-raised-button
               color="primary"
               routerLink="/cart/make-order">Make Order</a>
        </div>
    </ng-container>


    <ng-template #emptyCart>
        <div class="item d-block text-center">
            <mat-card-title>Cart is clear! Go to buy books!</mat-card-title>
        </div>
    </ng-template>
</div>