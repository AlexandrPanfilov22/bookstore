"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[644],{2644:($,g,a)=>{a.r(g),a.d(g,{GenresModule:()=>P});var r=a(6895),m=a(6338),c=a(7974),u=a(4859),l=a(1572),p=a(3060),h=a(1135),d=a(7579),v=a(8372),f=a(3900),G=a(8505),S=a(4004),z=a(262),y=a(9526),e=a(4650),x=a(148);function C(n,i){if(1&n&&(e.TgZ(0,"li",2)(1,"div",3),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t.title)}}let I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-genres-list"]],inputs:{genres:"genres"},decls:2,vars:1,consts:[[1,"list-item"],["class","li-item",4,"ngFor","ngForOf"],[1,"li-item"],[1,"element"]],template:function(t,s){1&t&&(e.TgZ(0,"ul",0),e.YNc(1,C,3,1,"li",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",s.genres))},dependencies:[r.sg],changeDetection:0}),n})();function T(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e._UZ(1,"app-genres-list",2),e.TgZ(2,"mat-paginator",3),e.NdJ("page",function(o){e.CHM(t);const F=e.oxw();return e.KtG(F.pageEvent(o))}),e.qZA()()}if(2&n){const t=i.ngIf,s=e.oxw();e.xp6(1),e.Q6J("genres",t),e.xp6(1),e.Q6J("length",s.totalItems)("pageSizeOptions",s._pageSizeOptions)("pageIndex",s.pageIndex)}}function O(n,i){1&n&&(e.TgZ(0,"div",4),e._UZ(1,"mat-spinner",5),e.qZA())}const M=[{path:"",component:(()=>{class n{constructor(t,s,o){this._router=t,this._activatedRoute=s,this._genresService=o,this.page=1,this.pageSize=10,this._pageSizeOptions=y.T,this._genresParams$=new h.X({page:this.page,page_size:this.pageSize}),this._destroy$=new d.x}ngOnInit(){this._saveQueryParams(),this.genres$=this._getGenres()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}pageEvent(t){this._updatePaginationGenres(t.pageIndex+1,t.pageSize),this._router.navigate([],{queryParams:{page:t.pageIndex+1,pageSize:t.pageSize}})}_saveQueryParams(){const t=+this._activatedRoute.snapshot.queryParams.page,s=+this._activatedRoute.snapshot.queryParams.pageSize;this.page=t||1,this.pageSize=s||10,this.pageIndex=t-1,this._updatePaginationGenres(this.page,this.pageSize)}_setMetaData(t){this.page=t.page,this.totalItems=t.totalItems,this.pageSize=t.pageSize}_getGenres(){return this._genresParams$.pipe((0,v.b)(300),(0,f.w)(t=>this._genresService.getGenres(t).pipe((0,G.b)(s=>{this._setMetaData(s)}),(0,S.U)(s=>s.result),(0,z.K)(()=>[]))))}_updatePaginationGenres(t,s){this._genresParams$.next({page:t,page_size:s})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.F0),e.Y36(p.gz),e.Y36(x.S))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-genres"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noneGenres",""],[3,"genres"],[1,"background-primary",3,"length","pageSizeOptions","pageIndex","page"],[1,"d-flex","justify-content-center"],["diameter","200","strokeWidth","5"]],template:function(t,s){if(1&t&&(e.YNc(0,T,3,4,"div",0),e.ALo(1,"async"),e.YNc(2,O,2,0,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(3);e.Q6J("ngIf",e.lcZ(1,2,s.genres$))("ngIfElse",o)}},dependencies:[r.O5,c.NW,l.Ou,I,r.Ov],changeDetection:0}),n})()}];let Z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.Bz.forChild(M),p.Bz]}),n})(),P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[r.ez,Z,m.ie,c.TU,u.ot,l.Cq]}),n})()}}]);