"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[458],{4179:(et,_,a)=>{a.r(_),a.d(_,{AuthorsModule:()=>tt});var l=a(6895),i=a(4006),b=a(6338),x=a(7974),u=a(4859),C=a(1572),c=a(3546),h=a(4144),y=a(7009),Z=a(3238),p=a(3060),M=a(7579),L=a(1135),f=a(4004),z=a(8372),I=a(3900),T=a(8505),U=a(262),F=a(2722),R=a(9526),t=a(4650),N=a(2821),S=a(5457),g=a(3582);let J=(()=>{class o{constructor(e){this._modalService=e}closeModal(){this._modalService.closeModal()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-modal-author-detail"]],inputs:{data:"data"},standalone:!0,features:[t.jDz],decls:18,vars:4,consts:[[1,"modal-overlay"],[1,"container"],[1,"modal-content"],[1,"row"],[1,"d-block","text-center","mb-3"],[1,"col-12","col-md-5","offset-md-2","mb-30","text-center"],["mat-card-image","","alt","Author",1,"border-radius-40",3,"src"],[1,"col-12","col-md-4","text-center","align-self-center"],[1,"mb-20"],[1,"mb-10"],[1,"col-12","text-center","align-self-center"],[1,"d-flex","flex-column","flex-md-row","justify-content-center"],["mat-raised-button","","color","warn",1,"align-self-center","col-4",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"div",3)(4,"mat-card-title",4),t._uU(5,"Author detail"),t.qZA(),t.TgZ(6,"div",5),t._UZ(7,"img",6),t.qZA(),t.TgZ(8,"div",7)(9,"mat-card-content",8)(10,"p",9),t._uU(11),t.ALo(12,"fullName"),t.qZA(),t.TgZ(13,"div",10),t._uU(14,"Author Info: Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus accusantium alias, amet architecto, culpa enim incidunt modi necessitatibus pariatur quam quas quasi ratione recusandae repellendus soluta, totam ullam vero vitae. "),t.qZA()()(),t.TgZ(15,"div",11)(16,"button",12),t.NdJ("click",function(){return n.closeModal()}),t._uU(17,"Close "),t.qZA()()()()()()),2&e&&(t.xp6(7),t.Q6J("src","http://placekitten.com/g/200/300",t.LSH),t.xp6(4),t.hij("Name: ",t.lcZ(12,2,n.data),""))},dependencies:[u.ot,u.lW,c.QW,c.a8,c.dn,c.G2,c.n5,S.D,g.k],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto;background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 2px 5px #0000004d}.card[_ngcontent-%COMP%]{padding-top:40px;padding-bottom:40px}.card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:40px;text-align:center}"]}),o})();var O=a(4850);function $(o,r){1&o&&t._UZ(0,"mat-divider",6)}function j(o,r){if(1&o&&(t.TgZ(0,"div")(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.YNc(5,$,1,0,"mat-divider",5),t.qZA()),2&o){const e=r.$implicit,n=r.last;t.xp6(2),t.hij("First Name: ",e.firstName,""),t.xp6(2),t.hij("Second Name: ",e.secondName,""),t.xp6(1),t.Q6J("ngIf",!n)}}let P=(()=>{class o{constructor(e){this._modalService=e}closeModal(){this._modalService.closeModal()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-modal-authors-list"]],inputs:{dataList:"dataList"},standalone:!0,features:[t.jDz],decls:8,vars:1,consts:[[1,"modal-overlay"],[1,"modal-content"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-column","flex-md-row","justify-content-center"],["mat-raised-button","","color","warn",1,"align-self-center","col-4",3,"click"],["class","mb-10",4,"ngIf"],[1,"mb-10"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2"),t._uU(3,"List of found authors"),t.qZA(),t.YNc(4,j,6,3,"div",2),t.TgZ(5,"div",3)(6,"button",4),t.NdJ("click",function(){return n.closeModal()}),t._uU(7,"Close "),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("ngForOf",n.dataList))},dependencies:[u.ot,u.lW,l.ez,l.sg,l.O5,O.t,O.d],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{max-height:80%;overflow-y:auto;background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 2px 5px #0000004d}"]}),o})(),A=(()=>{class o{constructor(e,n,s){this._componentFactoryResolver=e,this._injector=n,this._applicationRef=s}openAuthorModal(e){const n=this._componentFactoryResolver.resolveComponentFactory(J);this._modalRef=n.create(this._injector),this._modalRef.instance.data=e,this._applicationRef.attachView(this._modalRef.hostView),document.body.appendChild(this._modalRef.location.nativeElement)}openAuthorListModal(e){const n=this._componentFactoryResolver.resolveComponentFactory(P);this._modalRef=n.create(this._injector),this._modalRef.instance.dataList=e,this._applicationRef.attachView(this._modalRef.hostView),document.body.appendChild(this._modalRef.location.nativeElement)}closeModal(){this._modalRef&&(this._applicationRef.detachView(this._modalRef.hostView),this._modalRef.destroy())}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(t._Vd),t.LFG(t.zs3),t.LFG(t.z2F))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var d=a(9549);const Y=["*"];let w=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-autocomplete"]],ngContentSelectors:Y,decls:1,vars:0,template:function(e,n){1&e&&(t.F$t(),t.Hsn(0))}}),o})();function D(o,r){if(1&o&&(t.TgZ(0,"li",2)(1,"div",3),t._uU(2),t.ALo(3,"fullName"),t.qZA()()),2&o){const e=r.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,e))}}let Q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-authors-list"]],inputs:{authors:"authors"},decls:2,vars:1,consts:[[1,"list-item"],["class","li-item",4,"ngFor","ngForOf"],[1,"li-item"],[1,"element"]],template:function(e,n){1&e&&(t.TgZ(0,"ul",0),t.YNc(1,D,4,3,"li",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",n.authors))},dependencies:[l.sg,g.k],changeDetection:0}),o})();function k(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",10),t.NdJ("click",function(){const m=t.CHM(e).$implicit,v=t.oxw();return t.KtG(v.selectedOption(m))}),t._uU(1),t.ALo(2,"fullName"),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e)," ")}}function q(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t._UZ(1,"app-authors-list",11),t.TgZ(2,"mat-paginator",12),t.NdJ("page",function(s){t.CHM(e);const m=t.oxw();return t.KtG(m.pageEvent(s))}),t.qZA()()}if(2&o){const e=r.ngIf,n=t.oxw();t.xp6(1),t.Q6J("authors",e),t.xp6(1),t.Q6J("length",n.totalItems)("pageSizeOptions",n._pageSizeOptions)("pageIndex",n.pageIndex)}}function E(o,r){1&o&&(t.TgZ(0,"div",13),t._UZ(1,"mat-spinner",14),t.qZA())}function X(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Field is required"),t.qZA())}function V(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Field is required"),t.qZA())}const G=[{path:"",component:(()=>{class o{constructor(e,n,s,m,v){this._router=e,this._activatedRoute=n,this._authorsService=s,this._fb=m,this._modalService=v,this.showOption=!0,this.page=1,this.pageSize=10,this._pageSizeOptions=R.T,this._destroy$=new M.x,this._authorsParams$=new L.X({page:this.page,page_size:this.pageSize})}ngOnInit(){this._createForm(),this.getFilteredAuthors(),this._saveQueryParams(),this._getAllAuthors(),this.authors$=this._getAuthors()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}openAuthorInfoModal(){1===this.selectedAuthor.length?this._modalService.openAuthorModal(this.selectedAuthor[0]):this._modalService.openAuthorListModal(this.selectedAuthor)}getFilteredAuthors(){this.filteredAuthors=this.control.valueChanges.pipe((0,f.U)(e=>this.showOption?(this.selectedAuthor=this._filteringAuthors(e||""),this._filteringAuthors(e||"")):(this.showOption=!0,[])))}selectedOption(e){this.control.patchValue(`${e.firstName} ${e.secondName}`),this.showOption=!1,this._modalService.openAuthorModal(e)}pageEvent(e){this._updatePaginationAuthors(e.pageIndex+1,e.pageSize),this._router.navigate([],{queryParams:{page:e.pageIndex+1,pageSize:e.pageSize}})}_saveQueryParams(){const e=+this._activatedRoute.snapshot.queryParams.page,n=+this._activatedRoute.snapshot.queryParams.pageSize;this.page=e||1,this.pageSize=n||10,this.pageIndex=e-1,this._updatePaginationAuthors(this.page,this.pageSize)}_setMetaData(e){this.page=e.page,this.totalItems=e.totalItems,this.pageSize=e.pageSize}_getAuthors(){return this._authorsParams$.pipe((0,z.b)(300),(0,I.w)(e=>this._authorsService.getAuthors(e).pipe((0,T.b)(n=>{this._setMetaData(n)}),(0,f.U)(n=>n.result),(0,U.K)(()=>[]))))}_updatePaginationAuthors(e,n){this._authorsParams$.next({page:e,page_size:n})}_getAllAuthors(){this._authorsService.getAllAuthors$.pipe((0,f.U)(e=>e.result),(0,T.b)(e=>this.allAuthors=e),(0,F.R)(this._destroy$)).subscribe()}_filteringAuthors(e){if(e){const n=e.toLowerCase();return this.allAuthors?this.allAuthors.filter(s=>`${s.firstName} ${s.secondName}`.toLowerCase().includes(n)):this.allAuthors}return[]}_createForm(){this.control=this._fb.control("")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.F0),t.Y36(p.gz),t.Y36(N.S),t.Y36(i.qu),t.Y36(A))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-authors"]],decls:15,vars:8,consts:[[1,"col-12","mb-0","d-block"],["matInput","",3,"formControl"],["mat-icon-button","","matIconSuffix","",3,"click"],[1,"material-icons"],[1,"d-block","mb-20","option"],[3,"click",4,"ngFor","ngForOf"],[1,"row","mb-10","flex-column"],["routerLink","/authors/create","mat-button","","color","primary",1,"col-6","col-md-4","align-self-center"],[4,"ngIf","ngIfElse"],["noneAuthors",""],[3,"click"],[3,"authors"],[1,"background-primary",3,"length","pageSizeOptions","pageIndex","page"],[1,"d-flex","justify-content-center"],["diameter","200","strokeWidth","5"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-form-field",0),t._UZ(1,"input",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return n.openAuthorInfoModal()}),t.TgZ(3,"i",3),t._uU(4,"search"),t.qZA()()(),t.TgZ(5,"app-autocomplete",4),t.YNc(6,k,3,3,"mat-option",5),t.ALo(7,"async"),t.qZA(),t.TgZ(8,"div",6)(9,"a",7),t._uU(10,"Create Author"),t.qZA()(),t.YNc(11,q,3,4,"div",8),t.ALo(12,"async"),t.YNc(13,E,2,0,"ng-template",null,9,t.W1O)),2&e){const s=t.MAs(14);t.xp6(1),t.Q6J("formControl",n.control),t.xp6(5),t.Q6J("ngForOf",t.lcZ(7,4,n.filteredAuthors)),t.xp6(5),t.Q6J("ngIf",t.lcZ(12,6,n.authors$))("ngIfElse",s)}},dependencies:[l.sg,l.O5,p.rH,x.NW,u.zs,u.RK,C.Ou,i.Fj,i.JJ,i.oH,h.Nt,d.KE,d.R9,w,Z.ey,Q,l.Ov,g.k],styles:[".option[_ngcontent-%COMP%]{margin-top:-22px;background-color:#fff;border-radius:5px;box-shadow:0 2px 5px #0000004d;max-height:200px;overflow-y:auto}"],changeDetection:0}),o})()},{path:"create",component:(()=>{class o{constructor(e,n,s,m){this._formBuilder=e,this._snackBar=n,this._router=s,this._authorService=m,this._destroy$=new M.x}get firstName(){return this.authorForm.get("firstName")}get secondName(){return this.authorForm.get("secondName")}ngOnInit(){this._createForm()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}saveAuthor(){this._authorService.postAuthor(this.authorForm.value).pipe((0,F.R)(this._destroy$)).subscribe({next:()=>{this._snackBar.open("Author is created","Close"),this._redirectToAuthors()},error:()=>this._snackBar.open("Error adding a author","Close")})}_redirectToAuthors(){this._router.navigate(["authors"])}_createForm(){this.authorForm=this._formBuilder.group({firstName:this._formBuilder.control("",i.kI.required),secondName:this._formBuilder.control("",i.kI.required)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(y.ux),t.Y36(p.F0),t.Y36(N.S))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-author"]],decls:18,vars:3,consts:[[1,"text-center","create-card"],[1,"mb-10"],[1,"d-flex","flex-column",3,"formGroup"],["appearance","fill",1,"mb-30"],["matInput","","maxlength","25","formControlName","firstName","type","text",1,"text-center"],[4,"ngIf"],["matInput","","maxlength","25","formControlName","secondName","type","text",1,"text-center"],["mat-raised-button","","color","primary","type","submit",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-title")(2,"h2",1),t._uU(3,"Create Author"),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"form",2)(6,"mat-form-field",3)(7,"mat-label"),t._uU(8,"First Name"),t.qZA(),t._UZ(9,"input",4),t.YNc(10,X,2,0,"mat-error",5),t.qZA(),t.TgZ(11,"mat-form-field",3)(12,"mat-label"),t._uU(13,"Second Name"),t.qZA(),t._UZ(14,"input",6),t.YNc(15,V,2,0,"mat-error",5),t.qZA(),t.TgZ(16,"button",7),t.NdJ("click",function(){return n.saveAuthor()}),t._uU(17,"Create Author "),t.qZA()()()()),2&e&&(t.xp6(5),t.Q6J("formGroup",n.authorForm),t.xp6(5),t.Q6J("ngIf",null==n.firstName.errors?null:n.firstName.errors.required),t.xp6(5),t.Q6J("ngIf",null==n.secondName.errors?null:n.secondName.errors.required))},dependencies:[l.O5,u.lW,c.a8,c.dn,c.n5,i._Y,i.Fj,i.JJ,i.JL,i.nD,i.sg,i.u,h.Nt,d.KE,d.hX,d.TO],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center}"],changeDetection:0}),o})()}];let W=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.Bz.forChild(G),p.Bz]}),o})(),H=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({}),o})();var K=a(7392);let tt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.ez,W,b.ie,S.D,x.TU,u.ot,C.Cq,c.QW,i.u5,i.UX,h.c,y.ZX,H,Z.Ng,K.Ps]}),o})()}}]);